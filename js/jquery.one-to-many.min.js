!function(a){var b={init:function(c){return this.each(function(){var d=this,e=a(this),f={i:0,clone_row:e.find(".mto-row:first").detach()};f.clone_row.find(".delete, .js-delete").click(function(c){c.preventDefault(),b.delete_row.apply(d,[a(this).parents(".mto-row")])}),c&&c.methods&&a.extend(b,c.methods),e.find(".add, .js-add").data({methods:b,$plugin:e}).bind("click",{t:d},b.handle_add_click),e.data("manyToOneSelector",f)})},injectOnExistingRow:function(b,c){for(var d=0;d<b.length;d++){var e=c.find(b[d].selector);0===e.length&&a.app.debug&&console.error('No input found for selector "'+b[d].selector+'" in $.fn.manyToOneSelector.inject'),"function"==typeof b[d].before&&b[d].before(c),e.val(b[d].val),"function"==typeof b[d].after&&b[d].after(c)}},inject:function(a){var c=b.add_row.call(this);return b.injectOnExistingRow(a,c),c},add_row:function(){var c=a(this),d=c.data("manyToOneSelector"),e=d.clone_row.clone(!0),f=d.i;d.i+=1,c.data("manyToOneSelector",d),e.attr("data-i",f);var g=["name","id","for","value","data-id"];return e.find("["+g.join("], [")+"]").each(function(){for(var b=0;b<g.length;b++){var c=a(this);c.attr(g[b])&&c.attr(g[b],c.attr(g[b]).replace("__PH__",f))}}),c.find(".mto-container").append(e),b.update_altrow.call(this),e},delete_row:function(c){if(0===c.siblings(".mto-row").length){c.find("input").each(function(b,c){var d=a(c);"undefined"!=typeof d.data("textboxlist_ref")&&d.data("textboxlist_ref").removeList()});var d=["mto"];c.find("input, textarea").not(".no-clear").val("").trigger("change",d).trigger("blur",d),c.find("select:not(.no-clear)").find("option:first").attr("selected","selected").trigger("change",d),c.find("input:tabbable,select:tabbable,textarea:tabbable").not(".mto-nofocus").first().focus()}else c.find("input").each(function(b,c){var d=a(c);"undefined"!=typeof d.data("textboxlist_ref")&&d.data("textboxlist_ref").removeList()}),c.next().length?c.next().find("input:tabbable,select:tabbable,textarea:tabbable").not(".mto-nofocus").first().focus():c.prev().length&&c.prev().find("input:tabbable,select:tabbable,textarea:tabbable").not(".mto-nofocus").first().focus(),c.remove(),b.update_altrow.call(this),b.ensure_radio_checked.call(this)},delete_all_row:function(){b.each_row.call(this,function(b,c){a(c).remove()})},update_altrow:function(){var b=!1;a(this).find(".mto-row").each(function(){b?a(this).addClass("odd"):a(this).removeClass("odd"),b=!b})},ensure_radio_checked:function(){var b=a(this).find("input[type=radio]");b.length&&(b.filter(":checked").length||b.first().prop("checked",!0).trigger("click"))},handle_add_click:function(a){var c=a.data.t;a.preventDefault();var d=b.add_row.apply(c);d.find("input:tabbable,select:tabbable,textarea:tabbable").not(".mto-nofocus").first().focus()},each_row:function(b){return a(this).find(".mto-row").each(b)},map_row:function(b){return a(this).find(".mto-row").map(b)},last_row:function(){return a(this).find(".mto-row").last()},is_empty:function(b){var c=!0;return a(this).find(".mto-row").each(function(d,e){return b=a(e),b.find("input, textarea").not(".no-clear").each(function(b,d){var e=a(d);if(""!=e.val())return c=!1,!1}),c&&b.find("select:not(.no-clear)").each(function(a,b){if(0!=b.selectedIndex)return c=!1,!1}),c}),c}};a.fn.manyToOneSelector=function(c){if(b[c]){if(this.length>1)throw"$.manyToOneSelector functions may only be called with one dom node (except for init)";return b[c].apply(this,Array.prototype.slice.call(arguments,1))}return"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.manyToOneSelector"):b.init.apply(this,arguments)}}(jQuery);
//# sourceMappingURL=jquery.one-to-many.min.js.map