!function(a){function b(){var b=a('<div style="width: 100%; height:200px;">test</div>'),c=a('<div style="width:200px;height:150px; position: absolute; top: 0; left: 0; visibility: hidden; overflow:hidden;"></div>').append(b),d=b[0],e=c[0];a("body").append(e);var f=d.offsetWidth;c.css("overflow","scroll");var g=e.clientWidth;return c.remove(),f-g}function c(a,b){return new c.prototype.init(a,b)}var d=0;a.fn.stickyRows=function(b){return this.each(function(){a(this).is(".sticky-table")||(a.data(this,"stickyRows")?a.data(this,"stickyRows").setRowSets().calculateDimensions().redraw("init"):a.data(this,"stickyRows",c(this,b)))}),this},a.StickyRows=c,a.StickyRows.opts={container:"body",rows:"thead",scrollWidth:"auto",containersToSynchronize:!1,performanceDebugging:!1},c.fn=a.StickyRows.prototype={init:function(c,e){var f=this;return this.document=document,this.window=window,this.body=a("body"),this.uuid=d++,this.table={$element:a(c)},this.opts=a.extend({},a.StickyRows.opts,this.table.$element.data(),e),this.opts.performanceDebugging&&console.time("initialize stickyRows"),this.opts.scrollWidth="auto"==this.opts.scrollWidth?b():this.opts.scrollWidth,this.container={$element:this.table.$element.closest(this.opts.container)},this.container.isBody=this.container.$element.is("body"),this.container.isBodyScrollable=!1,this.scroll={vertical:!1,horizontal:!1},this.setRowSets(),this.setContainersToSynchronize(),this.calculateDimensions(),this.opts.performanceDebugging&&console.timeEnd("initialize stickyRows"),this.container.isBody?a(this.document).off(".stickyRowsRedraw"+d).on("scroll.stickyRowsRedraw"+d,a.proxy(this.redraw,this)):this.container.$element.off(".stickyRowsRedraw"+d).on("scroll.stickyRowsRedraw"+d,a.proxy(this.redraw,this)),a(this.window).off(".stickyRowsCalc"+d).on("resize.stickyRowsCalc"+d,a.proxy(this.calculateDimensions,this)),this.containersToSynchronize&&(this.containersToSynchronize.each(function(){return a(this).is("body")?(f.container.isBodyScrollable=!0,a(f.document).off(".stickyRowsCalc"+d).on("scroll.stickyRowsCalc"+d,a.proxy(f.calculateDimensions,f)),!1):void 0}),this.containersToSynchronize.not("body").off(".stickyRowsCalc"+d).on("scroll.stickyRowsCalc"+d,a.proxy(this.calculateDimensions,this))),this.redraw("init"),this},redraw:function(a){var b=a&&"init"==a;if(this.blocked)return this;this.opts.performanceDebugging&&console.time("stickyRows redraw"),this.blocked=!0;var c=document.documentElement&&document.documentElement.scrollTop||this.container.$element.scrollTop(),d=this.container.$element.scrollLeft();return this.scroll.vertical=!1,this.scroll.horizontal=!1,(c!=this.container.scroll.top||b)&&(this.scroll.vertical=c>this.container.scroll.top?"down":"up",this.container.scroll.top=c,this.table.offset.top-this.container.offset.top>c||this.table.offset.top-this.container.offset.top+this.table.height<c?this.stickyHead.$element.hasClass("hidden")||(this.stickyNow=[],this.stickyHead.$element.addClass("hidden"),this.stickyHead.$table.empty()):(this.searchCurrentStickyRows(),this.renderStickyRows())),(d!=this.container.scroll.left||b)&&(this.scroll.horizontal=d>this.container.scroll.left?"right":"left",this.container.scroll.left=d,this.setHorizontalOffset()),this.blocked=!1,this.opts.performanceDebugging&&console.timeEnd("stickyRows redraw"),this},setRowSets:function(){var b=this,c=b.opts.rows;return b.rowSets=[],b.stickyNow=[],a.isFunction(c)?a.each(c(),function(c,d){b.rowSets.push(a.map(d.get().reverse(),function(b){return{$row:a(b)}}))}):c instanceof jQuery?b.rowSets.push(a.map(c.get().reverse(),function(b){return{$row:a(b)}})):"string"==typeof c?b.rowSets.push(a.map(b.table.$element.children(c).get().reverse(),function(b){return{$row:a(b)}})):a.isArray(c)?a.each(c,function(c,d){b.rowSets.push(a.map(b.table.$element.children(d).get().reverse(),function(b){return{$row:a(b)}}))}):a.error("stickyRows.rows has incorrect format."),this},setContainersToSynchronize:function(){var b=this;if(b.opts.containersToSynchronize){var c=b.opts.containersToSynchronize;b.containersToSynchronize=[],a.isFunction(c)?b.containersToSynchronize=c():c instanceof jQuery?b.containersToSynchronize=c:"string"==typeof c?b.containersToSynchronize=a(c):a.isArray(c)?b.containersToSynchronize=a(c.join(",")):a.error("stickyRows.containersToSynchronize has incorrect format.")}return this},calculateDimensions:function(){var b,c=this;if(this.blocked)return this;this.opts.performanceDebugging&&console.time("stickyRows: calculate dimensions"),this.blocked=!0,this.container.offset=this.container.$element.offset(),this.container.width=this.container.$element.outerWidth()-this.opts.scrollWidth,this.container.scroll={top:this.container.$element.scrollTop(),left:this.container.$element.scrollLeft()},this.table.width=this.table.$element.outerWidth(),this.table.height=this.table.$element.height(),this.table.offset=this.table.$element.offset(),c.container.isBody||(this.table.offset.top=this.table.offset.top+this.container.scroll.top),a.each(c.rowSets,function(d,e){a.each(e,function(a,d){b=d.$row.offset(),d.offset={top:b.top-c.container.offset.top+(c.container.isBody?0:c.container.scroll.top),left:b.left-c.container.offset.left},d.height=d.$row.outerHeight()})});var d={top:0,left:0};if(this.container.isBodyScrollable&&(d={top:this.body.scrollTop(),left:this.body.scrollLeft()}),this.stickyHead)this.stickyHead.$element.css({top:this.container.offset.top-d.top,left:this.table.offset.left+this.container.scroll.left-d.left,width:this.container.width}),this.stickyHead.$table.css({width:this.table.width});else{var e=a("<div/>").addClass("sticky-header hidden").css({top:this.container.offset.top-d.top,left:this.table.offset.left+this.container.scroll.left-d.left,width:this.container.width}).insertBefore(this.table.$element),f=a("<table/>").addClass("sticky-table").addClass(this.table.$element.attr("class")).css({width:this.table.width}).appendTo(e);this.stickyHead={$element:e,$table:f,height:0,marginTop:0,changed:!1}}return this.blocked=!1,this.opts.performanceDebugging&&console.timeEnd("stickyRows: calculate dimensions"),this},searchCurrentStickyRows:function(){var b,c=this,d=this.container.scroll.top,e=this.container.scroll.top+this.stickyHead.height,f=[];a.each(this.rowSets,function(g,h){for(d=c.container.scroll.top,b=g;b--;)f[b]&&(d+=f[b].height);a.each(h,function(a,b){if(!f.length||f[g-1]&&f[g-1].offset.top<b.offset.top){if("down"==c.scroll.vertical&&b.offset.top<=e&&b.offset.top>=d)return c.stickyNow[g]&&c.stickyNow[g].$row!=b.$row&&c.stickyNow.push(b),!1;if(b.offset.top<d)return f.push(b),c.stickyNow[g]&&c.stickyNow[g].$row==b.$row||(c.stickyHead.changed=!0),!1}})}),(this.stickyHead.changed||this.stickyNow.length!=f.length)&&(this.stickyNow=f,this.stickyHead.changed=!0)},renderStickyRows:function(){var b=this,c=0,d=0;this.stickyHead.changed&&(this.stickyHead.$table.empty(),this.stickyNow.length?(this.stickyHead.$element.removeClass("hidden"),a.each(this.stickyNow,function(a,c){d+=c.height,b.stickyHead.$table.append(b.getCloneOfRow(c))})):this.stickyHead.$element.addClass("hidden"),this.stickyHead.height=d,this.stickyHead.changed=!1),this.table.height+this.table.offset.top<=this.container.scroll.top+this.stickyHead.height&&this.table.height+this.table.offset.top>=this.container.scroll.top&&(c=b.table.offset.top+b.table.height+1-this.container.scroll.top-this.stickyHead.height),this.stickyHead.marginTop=c,this.stickyHead.$table.css({"margin-top":c})},setHorizontalOffset:function(){this.stickyHead.$table.css({"margin-left":-this.container.scroll.left})},getRowCells:function(a){return a.is("thead, tbody")?a.children().children():a.children()},getCloneOfRow:function(b){var c;return b.$clone=b.$row.clone(),c=this.getRowCells(b.$clone),a.each(this.getRowCells(b.$row),function(b,d){c.eq(b).css("width",a(d).width())}),b.$clone}},c.prototype.init.prototype=c.prototype}(jQuery);
//# sourceMappingURL=jquery.stickyrows.min.map